<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ agent.name }} - Valorant Agent</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

    <div class="agent-container">
        <!-- Agent Image -->
        <div>
            <img src="{{ agent.image }}" alt="{{ agent.name }}" class="agent-image">
        </div>

        <!-- Agent Info -->
        <div class="agent-info">
            <h1>{{ agent.name }}</h1>
            <p class="role">{{ agent.role }}</p>
            <p>{{ agent.description }}</p>

            <h5>Abilities</h5>
            <ul class="abilities-list">
                {% for ability in agent.abilities %}
                    <li>
                        <img src="{{ ability.icon }}" alt="{{ ability.name }} Icon">
                        <strong>{{ ability.name }}</strong>: {{ ability.description }}
                    </li>
                {% endfor %}
            </ul>

            <!-- Back Button -->
            <a href="{{ url_for('index') }}" class="btn-back">Back to All Agents</a>
        </div>
    </div>

    <!-- Stats Chart Section -->
    <div class="chart-container">
        <div class="agent-abilities">
            <h5>Abilities Stats</h5>
            <canvas id="abilitiesChart"></canvas>
        </div>
    </div>

    <!-- Chart.js Script -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const abilities = {{ agent.abilities | tojson }};
        const abilityNames = abilities.map(ability => ability.name);
        const abilityValues = abilities.map((_, i) => (i + 1) * 10); // Fake values for display

        const ctx = document.getElementById('abilitiesChart').getContext('2d');
        const abilitiesChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: abilityNames,
                datasets: [{
                    label: 'Ability Power Levels (Demo)',
                    data: abilityValues,
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>

</body>

</html>
